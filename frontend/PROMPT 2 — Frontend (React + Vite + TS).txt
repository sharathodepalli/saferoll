PROMPT 2 — Frontend (React + Vite + TS)
Open a fresh Copilot/Claude Code chat for the frontend folder.
You are my frontend engineer. Build a single-page React (TypeScript + Vite + Tailwind) dashboard for SafeRoll. The backend API is the FastAPI service at http://localhost:8000. Read the workspace doc first:
* docs/📘 SAFEROLL - COMPLETE PROJECT DOCUMENTATION.txt
Follow the doc; if silent, use the contracts below.
Requirements
   * Endpoints used:
   * GET /v1/metrics → ring metrics & breaches
   * GET /v1/rollouts/{id} → rollout state + last 10 decisions
   * POST /v1/rollouts/{id}/promote
   * POST /v1/rollouts/{id}/pause
   * POST /v1/rollouts/{id}/rollback
   * Polling: every 2 seconds (simple setInterval, no WebSocket needed for MVP).
   * Status colors: green (all SLOs pass), yellow (cooldown active), red (paused or breach).
   * UX: very small and clear—no routing. Buttons disabled appropriately (e.g., promote disabled if paused or cooldown).
File/Folder layout
frontend/
  Dockerfile
  index.html
  package.json
  tsconfig.json
  vite.config.ts
  postcss.config.cjs
  tailwind.config.cjs
  src/
    main.tsx
    App.tsx
    api.ts                 # fetch helpers for all endpoints
    types.ts               # Types matching backend schemas
    components/
      RingCard.tsx         # shows ring name + three metrics + color
      Controls.tsx         # Promote / Pause / Rollback buttons
      Stat.tsx             # metric tile (label, value, pass/fail tag)
      Decisions.tsx        # last 5–10 decisions with timestamp & reason


Behavior
   * Show four RingCards (Pilot, 5%, 25%, All). Only the active ring card uses live SLO colors; others are greyed or “inactive”.
   * Top bar: rollout id, active ring, state (Active/Paused/Completed).
   * Controls:
   * Promote → POST promote; then disable during cooldown (UI timer).
   * Pause → POST pause, reflects red state.
   * Rollback → POST rollback, shows toast and resets colors after metrics recover.
   * Right rail:
   * Three Stat tiles: boot_success, crash_free_median, checkin_ms_median (with pass/fail label).
   * Decisions list (timestamp, kind, short reason).
   * Error handling: small toast if any API call fails; keep showing last known metrics.
   * Config: API_BASE = http://localhost:8000.
Styling
   * Tailwind utility classes; clean cards with subtle shadow and rounded corners; responsive for 1280×. No heavy theming.
Scripts
   * npm run dev (Vite)
   * npm run build and npm run preview
Deliverables
   1. All files above with working code; the app loads and polls.
   2. Print exact commands to run the frontend locally and a one-liner for setting API_BASE if needed.
   3. Short README section describing controls and polling cadence.
________________




________________


Monorepo glue (tell both copilots)
   * Add a root docker-compose.yml to run api + web + sim together (ports 8000, 5173).
Add a root Makefile with:
make run-backend
make run-frontend
make run-sim
make demo    # docker-compose up
   *    * Ensure backend CORS allows http://localhost:5173.



Repo : https://github.com/sharathodepalli/saferoll.git